import{c as t}from"./p-c4c0e844.js";import{MENU_BACK_BUTTON_PRIORITY as n}from"./p-1ca72347.js";const a=n=>t().duration(n?400:300),r=n=>{let r,e;const s=n.width+8,o=t(),i=t();n.isEndSide?(r=s+"px",e="0px"):(r=-s+"px",e="0px"),o.addElement(n.menuInnerEl).fromTo("transform",`translateX(${r})`,`translateX(${e})`);const c="ios"===n.mode,u=c?.2:.25;return i.addElement(n.backdropEl).fromTo("opacity",.01,u),a(c).addAnimation([o,i])},e=n=>{let r,e;const s=n.width;n.isEndSide?(r=-s+"px",e=s+"px"):(r=s+"px",e=-s+"px");const o=t().addElement(n.menuInnerEl).fromTo("transform",`translateX(${e})`,"translateX(0px)"),i=t().addElement(n.contentEl).fromTo("transform","translateX(0px)",`translateX(${r})`),c=t().addElement(n.backdropEl).fromTo("opacity",.01,.32);return a("ios"===n.mode).addAnimation([o,i,c])},s=n=>{const r=n.width*(n.isEndSide?-1:1)+"px",e=t().addElement(n.contentEl).fromTo("transform","translateX(0px)",`translateX(${r})`);return a("ios"===n.mode).addAnimation(e)},o=(()=>{const t=new Map,a=[],o=async t=>{if(await w(),"start"===t||"end"===t){return m(n=>n.side===t&&!n.disabled)||m(n=>n.side===t)}if(null!=t)return m(n=>n.menuId===t);return m(t=>!t.disabled)||(a.length>0?a[0].el:void 0)},i=async()=>(await w(),p()),c=(n,a)=>{t.set(n,a)},u=t=>{const n=t.side;a.filter(a=>a.side===n&&a!==t).forEach(t=>t.disabled=!0)},p=()=>m(t=>t._isOpen),l=()=>a.some(t=>t.isAnimating),m=t=>{const n=a.find(t);if(void 0!==n)return n.el},w=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(t=>t.componentOnReady()));return c("reveal",s),c("push",e),c("overlay",r),"undefined"!=typeof document&&document.addEventListener("ionBackButton",t=>{const a=p();a&&t.detail.register(n,()=>a.close())}),{registerAnimation:c,get:o,getMenus:async()=>(await w(),a.map(t=>t.el)),getOpen:i,isEnabled:async t=>{const n=await o(t);return!!n&&!n.disabled},swipeGesture:async(t,n)=>{const a=await o(n);return a&&(a.swipeGesture=t),a},isAnimating:async()=>(await w(),l()),isOpen:async t=>{if(null!=t){const n=await o(t);return void 0!==n&&n.isOpen()}return void 0!==await i()},enable:async(t,n)=>{const a=await o(n);return a&&(a.disabled=!t),a},toggle:async t=>{const n=await o(t);return!!n&&n.toggle()},close:async t=>{const n=await(void 0!==t?o(t):i());return void 0!==n&&n.close()},open:async t=>{const n=await o(t);return!!n&&n.open()},_getOpenSync:p,_createAnimation:(n,a)=>{const r=t.get(n);if(!r)throw new Error("animation not registered");return r(a)},_register:t=>{a.indexOf(t)<0&&(t.disabled||u(t),a.push(t))},_unregister:t=>{const n=a.indexOf(t);n>-1&&a.splice(n,1)},_setOpen:async(t,n,a)=>{if(l())return!1;if(n){const n=await i();n&&t.el!==n&&await n.setOpen(!1,!1)}return t._setOpen(n,a)},_setActiveMenu:u}})();export{o as m};