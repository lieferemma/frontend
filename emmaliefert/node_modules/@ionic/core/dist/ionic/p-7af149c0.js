import{b as o}from"./p-9825fcb7.js";import{OVERLAY_BACK_BUTTON_PRIORITY as n}from"./p-1ca72347.js";let t=0;const e=new WeakMap,a=o=>({create:n=>m(o,n),dismiss:(n,t,e)=>y(document,n,t,o,e),getTop:async()=>v(document,o)}),s=a("ion-alert"),i=a("ion-action-sheet"),r=a("ion-loading"),c=a("ion-modal"),u=a("ion-picker"),d=a("ion-popover"),p=a("ion-toast"),l=o=>{const n=document;f(n);const e=t++;o.overlayIndex=e,o.hasAttribute("id")||(o.id=`ion-overlay-${e}`)},m=(o,n)=>customElements.whenDefined(o).then(()=>{const t=document,e=t.createElement(o);return e.classList.add("overlay-hidden"),Object.assign(e,n),k(t).appendChild(e),e.componentOnReady()}),f=o=>{0===t&&(t=1,o.addEventListener("focusin",n=>{const t=v(o);if(t&&t.backdropDismiss&&!B(t,n.target)){const o=t.querySelector("input,button");o&&o.focus()}}),o.addEventListener("ionBackButton",t=>{const e=v(o);e&&e.backdropDismiss&&t.detail.register(n,()=>e.dismiss(void 0,z))}),o.addEventListener("keyup",n=>{if("Escape"===n.key){const n=v(o);n&&n.backdropDismiss&&n.dismiss(void 0,z)}}))},y=(o,n,t,e,a)=>{const s=v(o,e,a);return s?s.dismiss(n,t):Promise.reject("overlay does not exist")},v=(o,n,t)=>{const e=((o,n)=>(void 0===n&&(n="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(o.querySelectorAll(n)).filter(o=>o.overlayIndex>0)))(o,n);return void 0===t?e[e.length-1]:e.find(o=>o.id===t)},h=async(n,t,e,a,s)=>{if(n.presented)return;n.presented=!0,n.willPresent.emit();const i=n.enterAnimation?n.enterAnimation:o.get(t,"ios"===n.mode?e:a);await g(n,i,n.el,s)&&n.didPresent.emit()},b=async(n,t,a,s,i,r,c)=>{if(!n.presented)return!1;n.presented=!1;try{n.willDismiss.emit({data:t,role:a});const u=n.leaveAnimation?n.leaveAnimation:o.get(s,"ios"===n.mode?i:r);"gesture"!==a&&await g(n,u,n.el,c),n.didDismiss.emit({data:t,role:a}),e.delete(n)}catch(u){console.error(u)}return n.el.remove(),!0},k=o=>o.querySelector("ion-app")||o.body,g=async(n,t,a,s)=>{a.classList.remove("overlay-hidden");const i=t(a.shadowRoot||n.el,s);n.animated&&o.getBoolean("animated",!0)||i.duration(0),n.keyboardClose&&i.beforeAddWrite(()=>{const o=a.ownerDocument.activeElement;o&&o.matches("input, ion-input, ion-textarea")&&o.blur()});const r=e.get(n)||[];return e.set(n,[...r,i]),await i.play(),!0},w=(o,n)=>{let t;const e=new Promise(o=>t=o);return j(o,n,o=>{t(o.detail)}),e},j=(o,n,t)=>{const e=a=>{o.removeEventListener(n,e),t(a)};o.addEventListener(n,e)},x=o=>"cancel"===o||o===z,B=(o,n)=>{for(;n;){if(n===o)return!0;n=n.parentElement}return!1},E=o=>o(),P=(n,t)=>{if("function"==typeof n)return o.get("_zoneGate",E)(()=>{try{return n(t)}catch(o){console.error(o)}})},z="backdrop";export{z as B,s as a,i as b,d as c,l as d,h as e,b as f,w as g,e as h,x as i,r as l,c as m,u as p,P as s,p as t};